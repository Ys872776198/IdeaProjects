-- 创建部门表（dept） dept：department 部分， loc：location 位置
create table DEPT(
	DEPTNO	INT(2) NOT NULL,
	DNAME 	VARCHAR(14),
	LOC 		VARCHAR(13)
);
ALTER TABLE DEPT 
	ADD CONSTRAINT PK_DEPT PRIMARY KEY (DEPTNO);

-- 创建员工表（emp）emp：employee 员工， mgr：manager 上级领导， hiredate：入职日期， firedate：解聘日期， common：补助， daptno：参照 表dapt(deptno)
CREATE TABLE EMP(
	EMPNO		INT(4),
	ENAME		VARCHAR(10),
	JOB			VARCHAR(9),
	MGR			INT(4),
	HIREDATE	DATE,
	SAL			DOUBLE(7,2),
	COMM		DOUBLE(7,2),
	DEPTNO	INT(2)
);
ALTER TABLE EMP 
	ADD CONSTRAINT PK_EMP PRIMARY KEY (EMPNO);
ALTER TABLE EMP 
	ADD CONSTRAINT FK_EMP FOREIGN KEY (DEPTNO) 
	REFERENCES DEPT(DEPTNO) ON UPDATE CASCADE ON DELETE CASCADE;
-- ALTER TABLE EMP DROP FOREIGN KEY FK_EMP;

-- 创建薪资等级表表（salgrade）
CREATE TABLE SALGRADE(
	GRADE		INT,
	LOSAL		DOUBLE(7,2),
	HISAL		DOUBLE(7,2)
);
ALTER TABLE SALGRADE
	ADD CONSTRAINT PRIMARY KEY (GRADE);

-- 创建奖金表（bonus）
CREATE TABLE BONUS(
	ENAME		VARCHAR(10),
	JOB			VARCHAR(9),
	SAL			DOUBLE(7,2),
	COMM 		DOUBLE(7,2)
);

INSERT INTO DEPT VALUES(10, "ACCOUNTING", "NEW YORC");
INSERT INTO DEPT VALUES(20, "RESEARCH", "DALLAS");
INSERT INTO DEPT VALUES(30, "SALES", "CHICAGO");
INSERT INTO DEPT VALUES(40, "OPERATIONS", "BOSTON");

INSERT INTO EMP VALUES(7369, "SMITH", "CLERK", 7902, "1980-12-17", 800, NULL, 20);
INSERT INTO EMP VALUES(7499, "ALLEN", "SALESMAN", 7698, "1981-02-20", 1600, 300, 30);
INSERT INTO EMP VALUES(7521, "WARD", "SALESMAN", 7698, "1981-02-22", 1250, 500, 30);
INSERT INTO EMP VALUES(7566, "JONES", "MANAGER", 7839, "1981-04-02", 2975, NULL, 30);
INSERT INTO EMP VALUES(7654, "MARTIN", "SALESMAN", 7698, "1981-09-28", 1250, 1400, 30);
INSERT INTO EMP VALUES(7698, "BLAKE", "MANAGER", 7839, "1981-05-01", 2850, NULL, 30);
INSERT INTO EMP VALUES(7782, "CLARK", "MANAGER", 7839, "1981-06-09", 2450, NULL, 10);
INSERT INTO EMP VALUES(7788, "SCOTT", "ANALYST", 7566, "1987-04-19", 3000, NULL, 20);
INSERT INTO EMP VALUES(7839, "KING", "PRESIDENT", NULL, "1981-11-17", 5000, NULL, 10);
INSERT INTO EMP VALUES(7844, "TURNER", "SALESMAN", 7698, "1981-09-08", 1500, 0, 30);
INSERT INTO EMP VALUES(7876, "ADAMS", "CLERK", 7788, "1987-05-23", 1100, NULL, 20);
INSERT INTO EMP VALUES(7900, "JAMES", "CLERK", 7698, "1981-12-03", 950, NULL, 30);
INSERT INTO EMP VALUES(7902, "FORD", "ANALYST", 7566, "1981-12-03", 3000, NULL, 20);
INSERT INTO EMP VALUES(7934, "MILLER", "CLERK", 7782, "1982-01-23", 1300, NULL, 10);

INSERT INTO SALGRADE VALUES(1, 700, 1200);
INSERT INTO SALGRADE VALUES(2, 1201, 1400);
INSERT INTO SALGRADE VALUES(3, 1401, 2000);
INSERT INTO SALGRADE VALUES(4, 2001, 3000);
INSERT INTO SALGRADE VALUES(5, 3001, 9999);


-- 单表查询-简单的select操作
-- 显示所有信息（* 代表所有数据）
SELECT * FROM DEPT;

-- 显示部分列
select deptno, dname from dept;

-- 显示部分列,部分行
SELECT DEPTNO, DNAME FROM DEPT WHERE (DEPTNO < 30);

-- 起别名(AS:代表alias 别名。as可以省略不写。别名可以用单引号或者双引号括起来，也可以不用引号括起来，但是当别名中包含了特殊符号，那么别名必须被引号括起来。)
SELECT DEPTNO 部门编号, DNAME 部门名称 FROM DEPT;
SELECT DEPTNO AS 部门编号, DNAME AS 部门名称 FROM DEPT;
SELECT DEPTNO AS "部门编号", DNAME AS '部门名称' FROM DEPT;
SELECT DEPTNO AS "部门 编号", DNAME AS "部门 名称" FROM DEPT;

-- 算数运算
SELECT EMPNO, ENAME, SAL AS "涨薪前", SAL + 1000 AS "涨薪后" FROM EMP WHERE SAL > 2000;

-- 去重操作(DISTINCT)
SELECT DISTINCT EMPNO, ENAME,JOB FROM EMP;			-- 对后面所有列都有去重效果，而不是单独某一列去重（DISTINCT 必须放在求前面）

-- 排序
-- 	默认为升序
select * from EMP ORDER BY JOB;					-- 省略了ASC
select * from EMP ORDER BY JOB ASC;
-- 	降序
select * from EMP ORDER BY JOB DESC;	
-- 	升降序组合使用
select * from EMP ORDER BY JOB ASC, SAL DESC;			-- 这里表示先安装job进行升序，当job相同时，再安装asl进行降序。(ORDER BY只能写一次)


-- 查看数据库对象的结构
desc DEPT;
desc EMP;
desc SALGRADE;
desc BONUS;

-- 查看t_student的内容
select * from DEPT;
select * from EMP;
select * from SALGRADE;
select * from BONUS;

-- 删除数据
delete from DEPT;
delete from EMP;
delete from SALGRADE;
delete from BONUS;

-- 查看数据库的创建语句
show CREATE table DEPT;
show CREATE table EMP;
show CREATE table SALGRADE;
show CREATE table BONUS;

-- 删除数据库
Drop table DEPT;
Drop table EMP;
Drop table SALGRADE;
Drop table BONUS;